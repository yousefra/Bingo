// cards information array
// top, left, rotate, rotateY, scale, z-index
$cards: ((100px, 250px, 18deg, 180deg, 0.8, 0),
    (55px, 200px, 9deg, 0deg, 0.9, 1),
    (20px, 110px, 3deg, 0deg, 0.95, 2),
    (0px, 0px, 0deg, 0deg, 1, 3),
    (20px, -110px, -3deg, 0deg, 0.95, 2),
    (55px, -200px, -9deg, 0deg, 0.9, 1),
    (100px, -250px, -18deg, 180deg, 0.8, 0));

:host {
    display: flex;
    width: 100%;
    height: 100%;
    align-items: center;
    justify-content: center;
}

// returns the style of a selected card
@mixin card($index) {
    $item: nth($list: $cards, $n: $index);
    top: nth($item, 1);
    left: nth($item, 2);
    transform: rotate(nth($item, 3)) rotateY(nth($item, 4)) scale(nth($item, 5));
    z-index: nth($item, 6);
    animation-timing-function: ease-in;
}

// returns only the transform property of a selected card
@mixin card-transform($index, $rotShift : 0) {
    $item: nth($list: $cards, $n: $index);
    transform: rotate(nth($item, 3)) rotateY(nth($item, 4) + $rotShift) scale(nth($item, 5));
}

// card-set and cards styling
.card-set {
    height: 360px;
    right: 80px;
    transform: scale(0.9);
    position: relative;

    * {
        position: absolute;
        transform-origin: bottom;
    }


    @for $i from 0 to 7 {
        .card#{$i} {
            @include card($i+1);
        }
    }

}

// cards movement animation
@for $i from 1 to 7 {
    // move left animation
    @keyframes card#{$i}-left {
        0% {
            @include card($i+1);
        }

        100% {
            @include card(($i));
        }
    }
    // move right animation (delayed)
    // @keyframes card#{$i}-right {
    //     0%
    //     { 
    //         @include card($i);
    //     }
    //     100%
    //     {
    //         @include card(($i+1));
    //     }
    // }
}

// card flip animations
@for $i from 0 to 7 {
    @keyframes flip#{$i} {
        0% {
            @include card-transform($i+1, 0);
        }

        100% {
            @include card-transform($i+1, 180);
        }
    }

    @keyframes flipback#{$i} {
        0% {
            @include card-transform($i+1, 180);
        }

        100% {
            @include card-transform($i+1, 0);
        }
    }
}

// picking central card animation
@keyframes picked {
    0% {
        transform: scale(1) rotateY(0deg);
    }

    100% {
        top: 90px;
        transform: scale(1.5) rotateY(360deg);

    }
}

// returning central card animation
@keyframes returned {
    0% {
        top: 90px;
        -webkit-transform: scale(1.5) rotateY(360deg);
    }

    100% {
        -webkit-transform: scale(1) rotateY(0deg);
    }

}